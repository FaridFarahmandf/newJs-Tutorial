<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>new Js</title>
    <!--bootstrap link-->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
  </head>
  <style>
    #container > *,
    #container1 > * {
      background-color: #f1f1f1;
      width: 100px;
      height: 100px;
      margin-left: 5px;
    }
  </style>
  <body>
    <p id="p1"></p>
    <p id="p2"></p>
    <p id="p3"></p>
    <p id="p4"></p>
    <p id="p5"></p>
    <p id="p6"></p>
    <p id="p7"></p>
    <p id="p8"></p>
    <p id="p9"></p>
    <p id="p10"></p>
    <div id="target"></div>
    <script>
      const time = "hh:mm:ss tt" ;
      const newTime = time.replace("hh",12).replace("mm",59).replace("ss",24).replace("tt","PM");
      console.log(newTime) 

      //composition 

    //   const createClockTime = date => ({date})

    //   console.log(createClockTime(new Date()));
    //   const appendAMPM = ({date}) =>
    //   ({
    //     date,
    //     ampm: (date.getHours() >= 12) ? "PM" : "AM"
    //   })
    //   console.log(appendAMPM(createClockTime(new Date())));
    //   const civilianHours = clockTime => {
    //     const hours = clockTime.date.getHours()
    //     return {
    //       ...clockTime,
    //       hours: (hours > 12) ?
    //       hours - 12 :
    //       hours
    //     }
    //   }
    // console.log(civilianHours(appendAMPM(createClockTime(new Date()))));

    // const removeDate = clockTime => {
    //   let newTime = {...clockTime}
    //   delete newTime.date
    //   return newTime
    // }

    // const oneFunction = date =>
    //     removeDate(
    //         civilianHours(
    //             appendAMPM(
    //                 createClockTime(date)
    //             )
    //         )
    //     )

    // console.log(oneFunction(new Date()))

    // a more elegant approach

    const compose = (...fns) =>
      (arg) =>
      fns.reduce(
        (composed, f) => f(composed),
        arg
    )
    // const oneFunctionSpread = compose(
    //   createClockTime,
    //   appendAMPM,
    //   civilianHours,
    //   removeDate
    // )
    // console.log(oneFunctionSpread(new Date()))

    // create clock 
    // setInterval(logClockTime,1000);
    // function logClockTime () {
    //   let time = getClockTime()

    //   console.clear();
    //   console.log(time);

    // }
    
    // function getClockTime(){
    //   let date = new Date();
      // let time = "" ;
    //   let time = {
    //     hour : date.getHours(),
    //     minute : date.getMinutes(),
    //     secound : date.getSeconds(),
    //     ampm : "AM" 
    //   }
    //   if (time.hour == 12) {
    //     time.ampm = "PM";
    //   }else if(time.hour > 12){
    //     time.ampm = "PM";
    //     time.hour -= 12;
    //   }

    //   if(time.hour<10) {
    //     time.hour = "0" + time.hour
    //   }
    //   if(time.minute<10) {
    //     time.minute = "0" + time.minute
    //   }
    //   if(time.secound <10) {
    //     time.secound  = "0" + time.secound 
    //   }
    //   return time.hour + ":"+time.minute+":"+time.secound+ " "+time.ampm
    // }

    //functional clock

    const oneSecond = () => 1000 ;
    const getCurrentTime = () => new Date() ;
    const clear = () => console.clear();
    const log = message => console.log(message);
    
    const serializeClockTime = (date) => ({
      hours : date.getHours() ,
      minutes : date.getMinutes() ,
      seconds : date.getSeconds()
    });

    const civilianHours = clockTime => ({
      ...clockTime ,
      hours: clockTime.hours > 12 ? clockTime.hours - 12 : clockTime.hours
    })
    const appendAMPM = clockTime =>({
      ...clockTime ,
      ampm:clockTime.hours >= 12 ? "PM" : "AM" ,
    })

    const display = target => time => target(time);
    const formatClock = format => time => 
      format
        .replace("hh" , time.hours)
        .replace("mm", time.minutes)
        .replace("ss" , time.seconds)
        .replace("tt" , time.ampm)

    const prependZero = key => clockTime => ({
      ...clockTime ,
      key : clockTime[key] < 10 ? "0" + clockTime[key] : clockTime[key]
    })

    const converToCivilianTime = clockTime => 
      compose(
        appendAMPM,
        civilianHours
      )(clockTime)

    const doubleDigits = civilianTime =>
      compose(
        prependZero("hours"),
        prependZero("minutes"),
        prependZero("seconds")
      )(civilianTime)

    const startTicking = () => 
      setInterval(
        compose(
          clear,
          getCurrentTime,
          serializeClockTime,
          converToCivilianTime,
          doubleDigits,
          formatClock("hh:mm:ss tt"),
          display(log)
        ),
        oneSecond()
      );
      startTicking();
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
